version: '3'
services:
  socket:
    image: codecamplao/eoffice-hub:1.1.0
    container_name: eoffice-hub
    hostname: hub
    extra_hosts:
      - "db.local:10.1.1.79"
      - "postgres.local:10.1.1.79"
      - "log.local:10.1.1.79"
    ports:
      - "5000:80"
    networks: 
      - ccnetwork
  nginx:
      image: nginx:1.19.2-alpine
      container_name: eoffice-proxy
      hostname: proxy
      volumes:
        - ./nginx.conf:/etc/nginx/nginx.conf:ro
        - ./eoffice-fullchain.pem:/opt/eoffice-fullchain.pem
        - ./eoffice-key.pem:/opt/eoffice-key.pem
      ports:
        - "443:443"
        - "80:80"
      networks: 
      - ccnetwork
      depends_on:
      - socket
networks: 
  ccnetwork: